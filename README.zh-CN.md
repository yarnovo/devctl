# devctl

[English](./README.md)

ğŸš€ ç®€å•çš„ npm dev å‘½ä»¤åå°ç®¡ç†å·¥å…·

[![npm version](https://badge.fury.io/js/devctl.svg)](https://badge.fury.io/js/devctl)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![TypeScript](https://img.shields.io/badge/%3C%2F%3E-TypeScript-%230074c1.svg)](http://www.typescriptlang.org/)

## ğŸ“– ç®€ä»‹

devctl æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥å°†ä½ çš„ `npm run dev` å‘½ä»¤ç½®äºåå°è¿è¡Œï¼Œå¹¶æä¾›ç®€å•çš„ç®¡ç†å‘½ä»¤ã€‚è®©ä½ åœ¨å¼€å‘æ—¶ä¸å†è¢«å ç”¨ç»ˆç«¯ï¼ŒåŒæ—¶è‡ªåŠ¨è®°å½•å¼€å‘æœåŠ¡å™¨çš„æ—¥å¿—è¾“å‡ºã€‚

### ğŸŒŸ ç‰¹æ€§

- ğŸ”„ **åå°è¿è¡Œ**ï¼šå°† `npm run dev` ç½®äºåå°ï¼Œé‡Šæ”¾ç»ˆç«¯
- ğŸ“ **æ—¥å¿—è®°å½•**ï¼šè‡ªåŠ¨å°†æ§åˆ¶å°è¾“å‡ºé‡å®šå‘åˆ°æ—¥å¿—æ–‡ä»¶
- âš¡ **ç®€å•æ§åˆ¶**ï¼šå¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€æŸ¥çœ‹çŠ¶æ€
- ğŸ“Š **çŠ¶æ€æŸ¥è¯¢**ï¼šæŸ¥çœ‹æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€å’Œè¿›ç¨‹ä¿¡æ¯
- ğŸ¯ **è·¨å¹³å°**ï¼šæ”¯æŒ Windowsã€macOS å’Œ Linux
- ğŸ” **æ—¥å¿—æŸ¥çœ‹**ï¼šæ”¯æŒå®æ—¶æ—¥å¿—è·Ÿè¸ª
- ğŸ§ª **ä»£ç è´¨é‡**ï¼šé›†æˆ ESLint v9ã€Prettierã€TypeScript ç±»å‹æ£€æŸ¥
- ğŸ” **Git Hooks**ï¼šä½¿ç”¨ Husky + lint-staged ç¡®ä¿ä»£ç è´¨é‡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…¨å±€å®‰è£…ï¼ˆæ¨èï¼‰
npm install -g devctl

# æˆ–è€…åœ¨é¡¹ç›®ä¸­å®‰è£…
npm install --save-dev devctl
```

### åŸºæœ¬ä½¿ç”¨

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆåå°è¿è¡Œï¼‰
devctl start

# æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€
devctl status

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
devctl logs

# åœæ­¢æœåŠ¡å™¨
devctl stop

# é‡å¯æœåŠ¡å™¨
devctl restart
```

## ğŸ“š å‘½ä»¤è¯´æ˜

### å¯ç”¨å‘½ä»¤

| å‘½ä»¤             | æè¿°                   |
| ---------------- | ---------------------- |
| `devctl start`   | åå°å¯åŠ¨ `npm run dev` |
| `devctl stop`    | åœæ­¢å¼€å‘æœåŠ¡å™¨         |
| `devctl restart` | é‡å¯å¼€å‘æœåŠ¡å™¨         |
| `devctl status`  | æŸ¥çœ‹æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€     |
| `devctl logs`    | æŸ¥çœ‹å®æ—¶æ—¥å¿—           |

### ä½¿ç”¨ç¤ºä¾‹

å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š

```bash
devctl start
```

è¾“å‡ºç¤ºä¾‹ï¼š

```
ğŸš€ æ­£åœ¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨...
âœ… å¼€å‘æœåŠ¡å™¨å·²å¯åŠ¨!
ğŸ“ è¿›ç¨‹ID: 12345
ğŸ“„ æ—¥å¿—æ–‡ä»¶: ./logs/dev.log
```

æŸ¥çœ‹çŠ¶æ€ï¼š

```bash
devctl status
```

è¾“å‡ºç¤ºä¾‹ï¼š

```
âœ… å¼€å‘æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
ğŸ“ è¿›ç¨‹ID: 12345
ğŸ“„ æ—¥å¿—æ–‡ä»¶: ./logs/dev.log
ğŸ• è¿è¡Œæ—¶é—´: 01:23:45
```

æŸ¥çœ‹æ—¥å¿—ï¼š

```bash
devctl logs
```

è¿™ä¼šå®æ—¶æ˜¾ç¤ºå¼€å‘æœåŠ¡å™¨çš„è¾“å‡ºæ—¥å¿—ã€‚

## ğŸ“ æ–‡ä»¶ç»“æ„

devctl ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª `logs` æ–‡ä»¶å¤¹ï¼š

```
logs/
â”œâ”€â”€ dev.log          # å¼€å‘æœåŠ¡å™¨æ—¥å¿—
â””â”€â”€ dev.pid          # è¿›ç¨‹IDæ–‡ä»¶
```

- `dev.log`ï¼šè®°å½• `npm run dev` çš„æ‰€æœ‰æ§åˆ¶å°è¾“å‡º
- `dev.pid`ï¼šå­˜å‚¨å½“å‰è¿è¡Œçš„è¿›ç¨‹ID

## ğŸ”§ å·¥ä½œåŸç†

1. **å¯åŠ¨æ—¶**ï¼š`devctl start` æ‰§è¡Œ `npm run dev` å¹¶å°†å…¶ç½®äºåå°
2. **æ—¥å¿—è®°å½•**ï¼šå°†æ‰€æœ‰æ§åˆ¶å°è¾“å‡ºé‡å®šå‘åˆ° `logs/dev.log` æ–‡ä»¶
3. **è¿›ç¨‹ç®¡ç†**ï¼šå°†è¿›ç¨‹IDä¿å­˜åˆ° `logs/dev.pid` æ–‡ä»¶
4. **çŠ¶æ€æŸ¥è¯¢**ï¼šé€šè¿‡æ£€æŸ¥è¿›ç¨‹IDæ¥åˆ¤æ–­æœåŠ¡å™¨æ˜¯å¦è¿˜åœ¨è¿è¡Œ
5. **åœæ­¢æœåŠ¡**ï¼šé€šè¿‡è¿›ç¨‹IDæ¥ç»ˆæ­¢åå°è¿è¡Œçš„å¼€å‘æœåŠ¡å™¨

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜ï¼šç«¯å£è¢«å ç”¨

å¦‚æœä½ çš„å¼€å‘æœåŠ¡å™¨æç¤ºç«¯å£è¢«å ç”¨ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸º devctl ä¸æ§åˆ¶ç«¯å£åˆ†é…ï¼Œå®ƒåªæ˜¯ä»£ç†æ‰§è¡Œ `npm run dev` å‘½ä»¤ã€‚

### é—®é¢˜ï¼šè¿›ç¨‹ä¸¢å¤±

```bash
Warning: Process not found, cleaning up PID file
```

è¿™æ˜¯æ­£å¸¸çš„æ¸…ç†è¡Œä¸ºï¼Œé‡æ–°å¯åŠ¨å³å¯ï¼š

```bash
devctl start
```

### é—®é¢˜ï¼šæƒé™ä¸è¶³

ç¡®ä¿å¯¹é¡¹ç›®ç›®å½•æœ‰å†™æƒé™ï¼Œä»¥ä¾¿åˆ›å»º `logs` æ–‡ä»¶å¤¹ã€‚

## ğŸ’» å¼€å‘

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd devctl

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build

# é“¾æ¥åˆ°å…¨å±€ï¼ˆç”¨äºæµ‹è¯•ï¼‰
npm link
```

### å¼€å‘è„šæœ¬

```bash
# è¿è¡Œæ‰€æœ‰æ£€æŸ¥ï¼ˆæ¨èåœ¨æäº¤å‰è¿è¡Œï¼‰
npm run check

# å•ç‹¬è¿è¡Œå„é¡¹æ£€æŸ¥
npm run typecheck  # TypeScript ç±»å‹æ£€æŸ¥
npm run lint       # ESLint ä»£ç æ£€æŸ¥
npm run test       # è¿è¡Œæµ‹è¯•

# ä»£ç æ ¼å¼åŒ–
npm run format     # æ ¼å¼åŒ–æ‰€æœ‰ä»£ç 
npm run format:check  # æ£€æŸ¥æ ¼å¼åŒ–çŠ¶æ€

# ä¿®å¤ ESLint é—®é¢˜
npm run lint:fix
```

### æäº¤ä»£ç 

æœ¬é¡¹ç›®ä½¿ç”¨ Husky + lint-staged ç¡®ä¿ä»£ç è´¨é‡ã€‚æäº¤ä»£ç æ—¶ä¼šè‡ªåŠ¨ï¼š

1. æ ¼å¼åŒ–æš‚å­˜çš„æ–‡ä»¶ï¼ˆä½¿ç”¨ Prettierï¼‰
2. è¿è¡Œ ESLint æ£€æŸ¥å¹¶è‡ªåŠ¨ä¿®å¤
3. åªæœ‰é€šè¿‡æ‰€æœ‰æ£€æŸ¥æ‰èƒ½æäº¤

```bash
# æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº
git add .

# æäº¤ï¼ˆä¼šè‡ªåŠ¨è§¦å‘æ£€æŸ¥ï¼‰
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE)ã€‚
